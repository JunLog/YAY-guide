## ä¹°å–è‚¡ç¥¨ç³»åˆ—

æ­¤ç³»åˆ—å¯èƒ½æœ‰ä¸€éƒ¨åˆ†é¢˜ç›®å¯ä»¥ç”¨è´ªå¿ƒå»è§£å†³ã€‚æˆ‘ä¼šè¿›è¡Œæ ‡è®°ï¼Œä½†æ˜¯æ›´å¤šçš„éƒ½ä¼šä½¿ç”¨åŠ¨æ€è§„åˆ’å»è§£å†³ã€‚

## 121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/)

### æ€è·¯

å½“å¤©çš„è‚¡ç¥¨æœ‰ä¸‰ç§çŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯`å–å‡º` ä¸€ä¸ªæ˜¯`ä¹°å…¥` ä¸€ä¸ªæ˜¯ä¸æ“ä½œ

ä½†æ˜¯ç¬¬ä¸‰ç§çŠ¶æ€å…¶å®å¯ä»¥è¿›å…¥å‰ä¸¤ä¸ªçŠ¶æ€é‡Œé¢ã€‚

åŠ¨è§„äº”éƒ¨æ›²ï¼š

* ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å®šä¹‰

> dp[i] [0]ä»£è¡¨ç¬¬iå¤©æ‰€æŒæœ‰è‚¡ç¥¨æ‰€å¾—çš„ç°é‡‘çš„æ•°é‡ï¼ˆä¹°å…¥æˆ–è€…ä¹‹å‰å°±ä¹°äº†ï¼‰  çŠ¶æ€äºŒ
>
> dp[i] [1]ä»£è¡¨ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—çš„ç°é‡‘æ•°é‡ï¼ˆå–å‡ºï¼‰ çŠ¶æ€ä¸€

* ç¡®å®šé€’æ¨å…¬å¼

> dp[i] [0]å¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡º
>
> * ä¿æŒç°çŠ¶ï¼Œä¸ä¹°å…¥æˆ–è€…ä¹‹å‰ä¹°äº†ï¼Œç°åœ¨ä¸è€ƒè™‘å–   çŠ¶æ€ä¸‰
> * å½“å¤©ä¹°å…¥è‚¡ç¥¨
>
> ä¸¤è€…å–æœ€å¤§
>
> dp[i][0] = max(dp[i - 1] [0], -prices[i]);
>
> dp[i] [1]å¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡º
>
> * ä¿æŒç°çŠ¶ã€‚ä¿æŒç¬¬i-1å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„é‡‘é¢   çŠ¶æ€ä¸‰
> * å–å‡ºè‚¡ç¥¨ï¼Œä¼šè·å¾—çš„é‡‘é¢ç­‰äºç¬¬i-1å¤©æŒæœ‰çš„é‡‘é¢åŠ ä¸Šå½“å¤©å–å‡ºè‚¡ç¥¨çš„é‡‘é¢
>
> ä¸¤è€…å–æœ€å¤§
>
> dp[i][1] = max(dp[i - 1] [1], prices[i] + dp[i - 1] [0]);

* dpæ•°ç»„åˆå§‹åŒ–

> é€’æ¨å…¬å¼çš„åŸºç¡€æ˜¯dp[0] [0] ä¸dp[0] [1]
>
> æ ¹æ®å®šä¹‰
>
> dp[0] [0]ä¸€å®šéœ€è¦ä¹°å…¥è‚¡ç¥¨ï¼Œå› ä¸ºä¸å¯èƒ½ä»å‰ä¸€å¤©æ¨å‡ºã€‚
>
> dp[0] [1]ä¸æŒæœ‰è‚¡ç¥¨ï¼Œåªèƒ½æ˜¯0

* ç¡®å®šéå†é¡ºåº

> ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºdp[i]éƒ½æ˜¯æœ‰dp[i - 1]æ¨å¯¼å‡ºæ¥çš„ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯ä»å‰å‘åéå†ã€‚

* ä¸¾ä¾‹dpæ•°ç»„

![121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](https://cdn.jsdelivr.net/gh/baici1/image-host/newimg/20211021133445.png)

### ä»£ç 

```go
func maxProfit(prices []int) int {
    dp:=make([][]int,len(prices))
    for i:=0;i<len(prices);i++{
        dp[i]=make([]int,2)
    }
    dp[0][0]=-prices[0]
    dp[0][1]=0
    for i:=1;i<len(prices);i++{
        dp[i][0]=max(dp[i-1][0],-prices[i])
        dp[i][1]=max(dp[i-1][1],prices[i]+dp[i-1][0])
    }
    return dp[len(prices)-1][1]
}
func max(a,b int)int{
    if a>b{
        return a
    }
    return b
}
```

ğŸ˜‹ï¼šæ­¤é¢˜å¯ä»¥ç”¨è´ªå¿ƒå»è§£å†³

```go
func maxProfit(prices []int) int {
    low:=prices[0]
    ans:=0
    for i:=1;i<len(prices);i++{
        low=min(low,prices[i])
        ans=max(ans,prices[i]-low)
    }
    return ans
}
func max(a,b int)int{
    if a>b{
        return a
    }
    return b
}
func min(a,b int)int{
    if a<b{
        return a
    }
    return b
}
```

##  122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/)

### æ€è·¯

æ­¤é¢˜ä¸ä¸Šé¢˜å…¶å®å·®ä¸å¤šçš„ã€‚éƒ½æ˜¯åœ¨æŸä¸€å¤©ä¹°å…¥å’Œå–å‡ºã€‚æ‰€ä»¥å¯¹äºæ¯ä¸€å¤©éƒ½æ˜¯ä¸‰ä¸ªçŠ¶æ€:ä¹°å…¥ä¸å–å‡ºä¸ä¸æ“ä½œã€‚

åŸºæœ¬ä¸Šçš„æ€è·¯éƒ½ä¸ä¼šæœ‰å¾ˆå¤§çš„æ”¹åŠ¨ã€‚

æ­¤é¢˜çš„å·®å¼‚æ˜¯åœ¨è¿™ä¹ˆå¤šå¤©é‡Œé¢ï¼Œæˆ‘å¯ä»¥è¿›è¡Œå¤šæ¬¡çš„ä¹°å…¥ä¸å–å‡ºçš„æ“ä½œã€‚

å¯¹äºå–å‡ºçš„æ“ä½œå…¶å®æ²¡æœ‰å¤ªå¤šçš„å˜åŠ¨ï¼Œå› ä¸ºæˆ‘ä»…ä»…å½“å¤©å–å‡ºï¼Œæˆ–è€…ä¸æ“ä½œã€‚

ä½†æ˜¯å¯¹äºä¹°å…¥ä¸åŒã€‚

* å‰ä¸€é¢˜ï¼Œæˆ‘åªèƒ½ä¹°ä¸€æ¬¡ï¼Œæ‰€ä»¥å¦‚æœæˆ‘å½“å¤©ä¹°äº†ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘æŒæœ‰çš„è‚¡ç¥¨ç°é‡‘å°±æ˜¯`-prices[i]`
* ä½†æ˜¯è¿™ä¸€é¢˜ä¸åŒï¼Œæˆ‘å¯èƒ½ä¹‹å‰åšè¿‡äº¤æ˜“ï¼Œæˆ‘ä¹°å…¥è‚¡ç¥¨åçš„æŒæœ‰ç°é‡‘ä¸å†æ˜¯`-prices[i]`äº†è€Œæ˜¯æ‹¿ç¬¬i-1å¤©å–å‡ºè‚¡ç¥¨æ‰€å¾—çš„é‡‘é¢æ‹¿æ¥ä¹°ä»Šå¤©çš„è‚¡ç¥¨â€“ã€‹dp[i - 1] [1] - prices[i]

è¿™æ˜¯ä¸¤è€…è§£é¢˜çš„å·®å¼‚ã€‚

### ä»£ç 

```go
func maxProfit(prices []int) int {
    dp:=make([][]int,len(prices))
    for i:=0;i<len(prices);i++{
        dp[i]=make([]int,2)
    }
    dp[0][0]=-prices[0]
    dp[0][1]=0
    for i:=1;i<len(prices);i++{
        dp[i][0]=max(dp[i-1][0],dp[i-1][1]-prices[i])
        dp[i][1]=max(dp[i-1][1],dp[i-1][0]+prices[i])
    }
    return dp[len(prices)-1][1]
}
func max(a,b int)int{
    if a<b{
        return b
    }
    return a
}
```

ğŸ˜‹ï¼šæ­¤é¢˜ä¹Ÿå¯ä»¥ç”¨è´ªå¿ƒå»è§£å†³

```go
func maxProfit(prices []int) int {
    ans:=0
    for i:=1;i<len(prices);i++{
        if prices[i]-prices[i-1]>0{
            ans+=prices[i]-prices[i-1]
        }
    }
    return ans
}
```

## 123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/)

### æ€è·¯

æ­¤é¢˜çš„å·®å¼‚æ˜¯é™åˆ¶äº†äº¤æ˜“çš„æ¬¡æ•°ï¼Œä¸å†æ˜¯ä½ å¯ä»¥éšæ„äº¤æ˜“äº†ã€‚

é‚£ä¹ˆæ¯å¤©çš„çŠ¶æ€å¯èƒ½å°±æœ‰æ‰€å˜åŒ–äº†ã€‚ä¸å†æ˜¯ä»…ä»…ç®€å•çš„ä¹°å…¥ä¸å–å‡ºæˆ–è€…ä¸æ“ä½œã€‚

è€Œæ˜¯éœ€è¦è®°å½•ä¹°å…¥ä¸å–å‡ºäº†ã€‚ï¼ˆä¸æ˜¯åˆ©ç”¨å˜é‡å»è®¡æ•°ï¼‰

å½“å¤©çš„çŠ¶æ€å°±æœ‰5ä¸ªäº†

* ç¬¬ä¸€æ¬¡çš„ä¹°å…¥
* ç¬¬ä¸€æ¬¡çš„å–å‡º
* ç¬¬äºŒæ¬¡çš„ä¹°å…¥
* ç¬¬äºŒæ¬¡çš„å–å‡º
* ä¸æ“ä½œ

å…¶ä½™çš„æ“ä½œå°±ä¸ç¬¬äºŒé“é¢˜ä¸€è‡´äº†ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ç¬¬å‡ æ¬¡çš„ä¹°å…¥ï¼Œä½ éœ€è¦ç”¨ç¬¬i-1å¤©å“ªä¸€ä¸ªçŠ¶æ€çš„é’±ï¼Œæˆ–è€…ç¬¬å‡ æ¬¡çš„å–å‡ºä½ éœ€è¦åŠ ä¸Šç¬¬i-1å¤©çš„å“ªä¸€ä¸ªçŠ¶æ€çš„æ‰‹é‡Œçš„ç°é‡‘

æƒ³æ˜ç™½ï¼Œè¿™é¢˜å°±æ‡‚äº†ã€‚

å¯èƒ½æœ‰äººä¼šæœ‰ç–‘æƒ‘ï¼Ÿ

> ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦æŠŠä¸æ“ä½œå•ç‹¬æ‹å‡ºæ¥å‘¢ï¼Ÿä¸åƒä¹‹å‰ä¸€æ ·æ”¾åˆ°ä¹°å…¥ä¸å–å‡ºé‡Œé¢å—ï¼Ÿ
>
> åªæ˜¯è¯´åˆ†çš„æ›´ç»†ç‚¹ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸Šã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ”¾åˆ°æ¯å¤©çš„ä¹°å…¥ä¸å–å‡ºçš„æ“ä½œé‡Œé¢ã€‚

### ä»£ç 

```go
func maxProfit(prices []int) int {
    dp:=make([][]int,len(prices))
    for i:=0;i<len(prices);i++{
        dp[i]=make([]int,5)
    }
    dp[0][0]=0
    dp[0][1]=-prices[0]
    dp[0][2]=0
    dp[0][3]=-prices[0]
    dp[0][4]=0
    for i:=1;i<len(prices);i++{
        dp[i][0]=dp[i-1][0]
        dp[i][1]=max(dp[i-1][1],dp[i-1][0]-prices[i])
        dp[i][2]=max(dp[i-1][2],dp[i-1][1]+prices[i])
        dp[i][3]=max(dp[i-1][3],dp[i-1][2]-prices[i])
        dp[i][4]=max(dp[i-1][4],dp[i-1][3]+prices[i])
    }
    return dp[len(prices)-1][4]
}
func max(a,b int)int{
    if a>b{
        return a
    }
    return b
}
```

```go
func maxProfit(prices []int) int {
    dp:=make([][]int,len(prices))
    for i:=0;i<len(prices);i++{
        dp[i]=make([]int,4)
    }
    
    dp[0][0]=-prices[0]
    dp[0][1]=0
    dp[0][2]=-prices[0]
    dp[0][3]=0
    for i:=1;i<len(prices);i++{
        
        dp[i][0]=max(dp[i-1][0],-prices[i])
        dp[i][1]=max(dp[i-1][1],dp[i-1][0]+prices[i])
        dp[i][2]=max(dp[i-1][2],dp[i-1][1]-prices[i])
        dp[i][3]=max(dp[i-1][3],dp[i-1][2]+prices[i])
    }
    return dp[len(prices)-1][3]
}
func max(a,b int)int{
    if a>b{
        return a
    }
    return b
}
```

å½“æŠŠä¸æ“ä½œæ”¾åˆ°æ¯å¤©çš„ä¹°å…¥ä¸å–å‡ºã€‚

è¿™é‡Œä¼šè€ƒè™‘ä¹°å…¥ä¸å–å‡ºçš„æ¬¡æ•°ã€‚æ‰€ä»¥ç¬¬ä¸€æ¬¡çš„ä¹°å…¥æ‰‹é‡Œçš„é’±éƒ½æ˜¯0ï¼Œæ‰€ä»¥ç°åœ¨æ‰€å¾—çš„é‡‘é¢å°±æ˜¯`-prices[i]`

ä½†æ˜¯ç¬¬äºŒé¢˜ä¸åŒï¼Œä¸èƒ½ç¡®ä¿ä¹‹å‰æ˜¯å¦è¿›è¡Œè¿‡äº¤æ˜“ã€‚

## 188.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIV

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/)

### æ€è·¯

è¿™é¢˜å°±æ˜¯æŠŠé™åˆ¶äº¤æ˜“æ¬¡æ•°ï¼Œæ”¹æˆäº†ä¸å›ºå®šçš„å˜é‡ã€‚ä½†æ˜¯å…¶å®æ‰€æœ‰çš„åšæ³•æ€è·¯éƒ½å’Œç¬¬ä¸‰é¢˜ä¸€æ¨¡ä¸€æ ·ã€‚

è¿™é‡Œå°±ä¸è®²äº†ï¼Œç›´æ¥è´´å‡ºä»£ç ï¼

### ä»£ç 

```go
func maxProfit(k int, prices []int) int {
    if len(prices)==0{
        return 0
    }
    dp:=make([][]int,len(prices))
    for i:=0;i<len(prices);i++{
        dp[i]=make([]int,2*k+1)
    }
    for i:=1;i<len(dp[0]);i++{
        if i%2!=0{
            dp[0][i]=-prices[0]
        }
    }
    for i:=1;i<len(prices);i++{
        dp[i][0]=dp[i-1][0]
        for j:=1;j<len(dp[0]);j++{
            if j%2!=0{
                 dp[i][j]=max(dp[i-1][j],dp[i-1][j-1]-prices[i])
            }else {
                dp[i][j]=max(dp[i-1][j],dp[i-1][j-1]+prices[i])
            }
        }
    }
    return dp[len(prices)-1][2*k]
}
func max(a,b int)int{
    if a>b{
        return a
    }
    return b
}
```

## 714.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/)

### æ€è·¯

æ­¤é¢˜çš„æè¿°ï¼Œä¸[122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII](##122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII)ä¸€è‡´ï¼Œåœ¨æœ¬é¢˜ä¸­å¤šäº†ä¸€ä¸ªå°†å–å‡ºçš„è‚¡ç¥¨æ‰€å¾—åˆ°çš„é’±å‡å»æ‰‹ç»­è´¹è¿™ä¸ªæ“ä½œäº†ã€‚

é€’æ¨å…¬å¼ï¼š

> dp[i] [0] = max(dp[i - 1] [0], dp[i - 1] [1] - prices[i]);
>
> dp[i] [1] = max(dp[i - 1] [1], dp[i - 1] [0] + prices[i] - fee);

### ä»£ç 

```go
func maxProfit(prices []int, fee int) int {
    dp:=make([][]int,len(prices))
    for i:=0;i<len(prices);i++{
        dp[i]=make([]int,2)
    }
    dp[0][0]=-prices[0]
    dp[0][1]=0
    for i:=1;i<len(prices);i++{
        dp[i][0]=max(dp[i-1][0],dp[i-1][1]-prices[i])
        dp[i][1]=max(dp[i-1][1],dp[i-1][0]+prices[i]-fee)
    }
    n:=len(prices)-1
    return dp[n][1]
}
func max(a,b int)int{
    if a>b{
        return a
    }
    return b
}
```

ğŸ˜‹ï¼šæ­¤é¢˜ä¹Ÿå¯ä»¥ç”¨è´ªå¿ƒå»è§£å†³

```go
func maxProfit(prices []int, fee int) int {
    res:=0
    minprices:=prices[0]
    for i:=0;i<len(prices);i++{
        if minprices>prices[i]{
            minprices=prices[i]
        }
        if prices[i]>minprices+fee{
              //ç´¯åŠ æ¯å¤©çš„æ”¶ç›Š
            res+=prices[i]-minprices-fee
             //æ›´æ–°æœ€å°å€¼ï¼ˆå¦‚æœè¿˜åœ¨æ”¶è·åˆ©æ¶¦çš„åŒºé—´é‡Œï¼Œè¡¨ç¤ºå¹¶ä¸æ˜¯çœŸæ­£çš„å–å‡ºï¼Œè€Œè®¡ç®—åˆ©æ¶¦æ¯æ¬¡éƒ½è¦å‡å»æ‰‹ç»­è´¹ï¼Œæ‰€ä»¥è¦è®©minBuy = prices[i] - fee;ï¼Œè¿™æ ·åœ¨æ˜å¤©æ”¶è·åˆ©æ¶¦çš„æ—¶å€™ï¼Œæ‰ä¸ä¼šå¤šå‡ä¸€æ¬¡æ‰‹ç»­è´¹ï¼ï¼‰
            minprices=prices[i]- fee
        }
    }  
    return res
}
```



## 309.æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/)

### æ€è·¯

æœ¬é¢˜ç›¸å¯¹äº[122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII](##122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII)å¤šäº†ä¸€ä¸ªå–å‡ºè‚¡ç¥¨åï¼Œä¼šæœ‰å†·å†»æœŸã€‚

åŠ¨è§„äº”éƒ¨æ›²ï¼š

* ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

> dp[i] [j] è¡¨ç¤ºï¼šç¬¬iå¤©ï¼ŒçŠ¶æ€ä¸ºj æ‰‹é‡Œçš„æœ€å¤šé‡‘é¢ä¸ºdp[i] [j]

çŠ¶æ€å¦‚ä¸‹ï¼š

1. çŠ¶æ€ä¸€ï¼šä¹°å…¥è‚¡ç¥¨çŠ¶æ€ï¼ˆä»Šå¤©ä¹°å…¥ï¼Œæˆ–è€…ä¹‹å‰å°±ä¹°å…¥ï¼‰

2. çŠ¶æ€äºŒï¼šä¹‹å‰å–å‡ºè‚¡ç¥¨ï¼Œä¹Ÿè¿‡äº†å†·å†»æœŸï¼Œä¸€ç›´éƒ½æ²¡æœ‰æ“ä½œ

3. çŠ¶æ€ä¸‰ï¼šåˆšåˆšä¹°å‡ºè‚¡ç¥¨

4. çŠ¶æ€å››ï¼šå¤„äºå†·å†»æœŸ

* ç¡®å®šé€’æ¨å…¬å¼

çŠ¶æ€ä¸€ï¼š

> çŠ¶æ€ä¸€çš„å€¼ç”±ä»¥ä¸‹æ“ä½œå¾—å‡º
>
> * ä¹‹å‰å°±ä¹°äº†è‚¡ç¥¨ï¼Œä¸€ç›´æ²¡æœ‰æ“ä½œ å³dp[i-1] [0]
> * ä»Šå¤©ä¹°äº†ï¼Œä½†æ˜¯å‰ä¸€å¤©æ˜¯å†·å†»æœŸ å³ dp[i-1] [3]-prices[i]
> * ä»Šå¤©ä¹°äº†ï¼Œå†·å†»æœŸå·²ç»è¿‡å»äº†ã€‚å³ dp[i-1] [1] -prices[i]
>
> çŠ¶æ€ä¸€å¾—å€¼ç”±ä¸Šé¢ä¸‰ä¸ªæ“ä½œå–æœ€å¤§å€¼

çŠ¶æ€äºŒï¼š

> çŠ¶æ€äºŒå¾—å€¼ç”±ä»¥ä¸‹æ“ä½œå¾—å‡º
>
> * ä¹‹å‰å°±å–å‡ºè‚¡ç¥¨ï¼Œä¹Ÿè¿‡äº†å†·å†»æœŸï¼Œç°åœ¨ä¹Ÿä¸€ç›´æ²¡æœ‰æ“ä½œ å³dp[i-1] [1]
> * å‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼Œå½“ç„¶ä¹Ÿæ²¡æœ‰æ“ä½œ å³dp[i-1] [3]
>
> çŠ¶æ€äºŒå¾—å€¼ç”±ä¸Šé¢ä¸¤ä¸ªæ“ä½œå–æœ€å¤§å€¼

çŠ¶æ€ä¸‰ï¼š

> çŠ¶æ€ä¸‰å¾—å€¼ç”±ä¹°äº†è‚¡ç¥¨åï¼Œç›´æ¥å–å‡ºå¾—æ“ä½œå¾—å‡º å³dp[i-1] [0]-prices[i]

çŠ¶æ€å››ï¼š

> çŠ¶æ€å››å¾—å€¼ç”±åˆšåˆšå–å‡ºè‚¡ç¥¨åçš„å€¼å¾—å‡ºï¼Œå½“æ—¶å–å‡ºè‚¡ç¥¨åï¼Œå°±æ˜¯å†·å†»æœŸï¼Œæ— æ³•è¿›è¡Œæ“ä½œ å³dp[i-1] [2]

* dpæ•°ç»„åˆå§‹åŒ–

> çŠ¶æ€ä¸€ï¼šdp[0] [0] åªèƒ½ä¹°è‚¡ç¥¨æ— æ³•ç»§æ‰¿ä¹‹å‰çš„é’± å³-prices[i]
>
> çŠ¶æ€äºŒï¼šdp[0] [1] æ— æ³•å–å‡º å³0
>
> çŠ¶æ€ä¸‰ï¼šdp[0] [2] å³0
>
> çŠ¶æ€å››ï¼šdp[0] [3] å³0

* dpæ•°ç»„éå†é¡ºåº

> ä»å‰å¾€åéå†ã€‚

* æ¨å¯¼dpæ•°ç»„

> ![309.æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ](https://img-blog.csdnimg.cn/2021032317451040.png)

### ä»£ç 

```go
func maxProfit(prices []int) int {
    dp:=make([][]int,len(prices))
    for i:=0;i<len(prices);i++{
        dp[i]=make([]int,4)
    }
    dp[0][0]=-prices[0]
    dp[0][1]=0
    dp[0][2]=0
    dp[0][3]=0
    for i:=1;i<len(prices);i++{
        //çŠ¶æ€ä¸€
        dp[i][0]=max(dp[i-1][0],max(dp[i-1][3]-prices[i],dp[i-1][1]-prices[i]))
        //çŠ¶æ€äºŒ
        dp[i][1]=max(dp[i-1][1],dp[i-1][3])
        //çŠ¶æ€ä¸‰
        dp[i][2]=dp[i-1][0]+prices[i]
        //çŠ¶æ€å››
        dp[i][3]=dp[i-1][2]
    }
    n:=len(prices)-1
    return max(dp[n][1],max(dp[n][2],dp[n][3]))
}
func max(a,b int)int{
    if a<b{
        return b
    }
    return a
}
```

